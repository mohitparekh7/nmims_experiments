# -*- coding: utf-8 -*-
"""Exp3_N029_ML.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1UHiMn5cUfRrZwEynhCmhs9Qbo7BeQfuZ
"""

#importing libraries 
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
import plotly.express as px

df1 = pd.read_csv('/content/Univ_Ranking1 (1).csv')
df1

df1.info()

df2 = pd.read_csv('/content/Univ_Ranking2 (1).csv')
df2

df2.info()

df3 = pd.read_csv('education_expenditure_supplementary_data (1).csv',index_col=None, header=0, engine='python')
df3

df3.info()

df1 = df1.replace('NaN',np.nan)

df1.fillna(df1.mean(), inplace=True)
df1

df2 = df2.replace('NaN',np.nan)
df2 = df2.replace('nan',np.nan)
df2 = df2.replace('-',np.nan)
df2 = df2.replace('',np.nan)
df2 = df2.replace(' ',np.nan)

df2.fillna(axis=0, method='ffill', limit=1, inplace=True)
df2.info()

df2

df3 = df3.replace('NaN',np.nan)
df3

df3.info()

df3.fillna(df3.median(), inplace=True)
df3.info()

df1.corr()

df2['total_score'] = df2['total_score'].astype('float64')
df2['international'] = df2['international'].astype('float64')
df2.corr()

df2.groupby('country')['total_score'].mean()

a = df1.groupby('country')['world_rank'].mean()
b = a.keys()
b

fig, ax = plt.subplots(figsize=(40,20))
sns.barplot(x=b, y=a, ax=ax)

a = df1.groupby('country')['world_rank'].agg(['mean', 'count'])
b = a[a['count']>=5]
b.sort_values(ascending=False, inplace=True, by=['mean'])
b[:10]

c = df1.groupby('country')['world_rank'].agg(['mean', 'count'])
c.sort_values(ascending=False, inplace=True, by=['count'])
c.index[:10]
m = np.array(c.index[:10])

d = df3.sort_values(ascending=False, by=['2011'])
d = pd.DataFrame(d)
d = d.groupby('country')['2011'].mean()
d.sort_values(ascending=False, inplace=True)

d.index

c.index[:10]

print(d.loc['United States'])

e = {'2011':[2.955556]}
ind = ['United States']
for i in d.index:
  if i in c.index[:10]:
    try:
      e['2011'].append(d.loc[i]['2011'])
      ind.append(i)
    except:
      pass
print(e)
print(ind)

